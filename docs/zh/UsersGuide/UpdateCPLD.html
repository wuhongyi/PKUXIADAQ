

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>升级CPLD &mdash; GDDAQ beta 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="应用案例" href="../Example/README.html" />
    <link rel="prev" title="时间同步" href="MultipleModulesSynchronously.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GDDAQ
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">简介</a></li>
</ul>
<p class="caption"><span class="caption-text">程序安装</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">程序安装</a></li>
</ul>
<p class="caption"><span class="caption-text">用户指南</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">用户指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="Crate.html">机箱</a></li>
<li class="toctree-l1"><a class="reference internal" href="FIRMWARE.html">固件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Decode.html">数据解码</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUI.html">图形交互界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="NOGUI.html">非图形交互界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="OnlineStattics.html">在线统计</a></li>
<li class="toctree-l1"><a class="reference internal" href="MakeEvent.html">MakeEvent</a></li>
<li class="toctree-l1"><a class="reference internal" href="FrontPanel.html">插件前面板</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logic.html">逻辑功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleModulesSynchronously.html">时间同步</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">升级CPLD</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pin-jtag-connector">6 pin JTAG connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-the-cpld">update the CPLD</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">应用案例</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Example/README.html">应用案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TOF2TAC.html">100M 模块测量飞行时间</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TimeResolution.html">时间分辨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/RecommendedParameters.html">推荐参数</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/InBeamGammaCIAE.html">在束伽马谱学</a></li>
</ul>
<p class="caption"><span class="caption-text">采购建议</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ProcurementProposal.html">采购推荐</a></li>
</ul>
<p class="caption"><span class="caption-text">编程指南</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/README.html">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/XIAAPI.html">XIA API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/PKUCode.html">PKU Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDDAQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>升级CPLD</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/UsersGuide/UpdateCPLD.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cpld">
<h1>升级CPLD<a class="headerlink" href="#cpld" title="永久链接至标题">¶</a></h1>
<p>当您在使用更新、更强大的计算机时遇到初始化(boot) Pixie-16 模块的问题。</p>
<p>根本原因是 XIA 通过 API 软件延迟的方式来确保在将固件比特流下载到 Pixie-16 模块时出现适当的延迟。</p>
<p>如何使用更好、或者多核的更好的计算机，这样的延迟在软件中无法保证。因此，用户需要对 CPLD 固件进行更新，以确保使用硬件方法满足此类延迟。</p>
<p><strong>请注意，此 CPLD 代码应用于更新所有 Pixie-16 模块，100 MHz，250 MHz或 500 MHz。</strong></p>
<div class="section" id="pin-jtag-connector">
<h2>6 pin JTAG connector<a class="headerlink" href="#pin-jtag-connector" title="永久链接至标题">¶</a></h2>
<p>You should now try to locate the 6-pin vertical Pixie-16 CPLD JTAG header J8 (circled in red in the screenshot below).</p>
<img alt="../_images/6pinJTAGconnector.png" src="../_images/6pinJTAGconnector.png" />
<p>The next step is to identify each of the 6 pins of the Pixie-16 CPLD JTAG header J8. When facing the top side of the Pixie-16 board, the 6 pins of the J8 connector can be identified as follows from top to bottom:  <strong>TDO</strong>, <strong>TDI</strong>, <strong>TMS</strong>, <strong>TCK</strong>, <strong>GND</strong>, and <strong>VCC</strong>. It is very important to match these pins with the colored cables from the green PCB connector that is plugged into the Xilinx Platform USB programmer.</p>
<p>One issue here is that the Pixie-16 CPLD JTAG header J8 has 2 mm pin spacing, and the colored cables from the green PCB connector of the Xilinx programmer might have too large header to be plugged into the J8 pins directly. In that case, an adapter might be needed to convert those colored cable headers to 2 mm pin spacing first.</p>
</div>
<div class="section" id="update-the-cpld">
<h2>update the CPLD<a class="headerlink" href="#update-the-cpld" title="永久链接至标题">¶</a></h2>
<p>Turn on your Pixie16 crate and the LED on the Xilinx Platform Cable USB should turn green.  If the LED does not turn green check you cable connection.  The grey INIT cable is purposely left unconnected.  Your start menu should now include the folder Xilinx ISE Design Suite 14.7. Run the 32 bit or 64 bit version of “iMPACT”.  Click on <strong>File-&gt;Initialize Chain</strong> and the program should find the <strong>xc2c256 CPLD</strong>.  Click on <strong>“No”</strong> in the window <strong>“Auto Assign Configuration Files Query”</strong>, then click on <strong>“Cancel”</strong>.   Left click on the Xilinx part in the window once, then right click and select <strong>“Assign New Configuration Files”</strong> and <strong>select the new “jed” file</strong>.  Left click on the the Xilinx part, right click and then click on <strong>“Program”</strong>.  A device programming properties window appears.  Ensure that only <strong>“Verify”</strong> and <strong>“Erase before Programming”</strong> are checked, then click on “OK”.   The program should now say <strong>“program succeeded”</strong> in blue at the bottom of the window.  The CPLD is now reprogrammed and the Pixie16 is ready to be tested.</p>
<p>I would suggest testing out your first board before reprogramming the CPLDs on all of your boards.  Once you are in the batch mode of reprogramming and you have the cable connected (the USB programmer LED is green), you only need to click on “Program” to reprogram CPLD on your next Pixie16.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Example/README.html" class="btn btn-neutral float-right" title="应用案例" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MultipleModulesSynchronously.html" class="btn btn-neutral float-left" title="时间同步" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Hongyi Wu(吴鸿毅)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>