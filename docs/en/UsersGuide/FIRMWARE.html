

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FIRMWARE &mdash; GDDAQ beta 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Decode" href="Decode.html" />
    <link rel="prev" title="Crate" href="Crate.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GDDAQ
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">Installation of Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MYSQL.html">MYSQL</a></li>
</ul>
<p class="caption"><span class="caption-text">Users Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="Crate.html">Crate</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FIRMWARE</a></li>
<li class="toctree-l1"><a class="reference internal" href="Decode.html">Decode</a></li>
<li class="toctree-l1"><a class="reference internal" href="GUI.html">GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="NOGUI.html">NOGUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="OnlineStattics.html">Online Stattics</a></li>
<li class="toctree-l1"><a class="reference internal" href="MakeEvent.html">MakeEvent</a></li>
<li class="toctree-l1"><a class="reference internal" href="FrontPanel.html">Front Panel</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logic.html">Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleModulesSynchronously.html">Multiple Modules Synchronously</a></li>
<li class="toctree-l1"><a class="reference internal" href="UpdateCPLD.html">Update CPLD</a></li>
</ul>
<p class="caption"><span class="caption-text">Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Example/README.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TOF2TAC.html">TOF measurement in 100M</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/TimeResolution.html">Time Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/RecommendedParameters.html">Recommended Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Example/InBeamGammaCIAE.html">In Beam Gamma</a></li>
</ul>
<p class="caption"><span class="caption-text">Programmers Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/README.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/XIAAPI.html">PIXIE-16 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ProgrammersGuide/PKUCode.html">PKU Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDDAQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>FIRMWARE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/UsersGuide/FIRMWARE.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="firmware">
<h1>FIRMWARE<a class="headerlink" href="#firmware" title="永久链接至标题">¶</a></h1>
<p><strong>Peking University Custom Firmware</strong></p>
<p>Added the following features based on standard firmware：</p>
<ul class="simple">
<li><dl class="simple">
<dt>100MHz 12 bit(pixie16_revd_12b100m_firmware_release)</dt><dd><ul>
<li><p>standard firmware</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>100MHz 14 bit(pixie16_revf_general_14b100m_firmware_release)</dt><dd><ul>
<li><p>standard firmware</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>100MHz 14 bit(pixie16_revfpku_14b100m_firmware_release_06092020) DSP down frequency 1/4 output has bug</dt><dd><ul>
<li><p>4-ch debug signals of the front panel A to the chassis backplane’s TriggerAll bits 28 to 31. TrigConfig3[0] control</p></li>
<li><p>send the external timestamp clock and clear as well as the run inhibit to the backplane using the MZTIO card. TrigConfig3[1/2] control front panel/backplane</p></li>
<li><p>multiplicity results can be output regardless of MultiplicityMaskHigh[31]=0 or 1.  Output from front panel A and RJ45.</p></li>
<li><p>The value is set to 0 when the calculated energy is negative.</p></li>
<li><p>The pileup event energy is not set to 0, output calculated values directly.</p></li>
<li><p>In the record waveform mode, when the waveform buffer is full, the module is not busy, and the header continues to record. In this case, the output event data has no waveform.</p></li>
<li><p>The record waveform mode with down frequency output. The strategy adopted is to select the output of 1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/128 frequency, ie how many points retain one point. The points retained are the averaged values.</p></li>
<li><p>tried to speed up the event processing, by removing some of the unnecessary wait when reading trace from each channel.</p></li>
<li><dl class="simple">
<dt>Also removed a few unnecessary processing routines in the DSP code:</dt><dd><ul>
<li><ol class="arabic simple">
<li><p>no longer process pile-up rejection or inverse pile-up rejection, all events will be accepted, but still with pileup flag in the event header;</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>removed “no traces for large pulses” feature.</p></li>
</ol>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>100MHz 14 bit(pixie16_revfpku_14b100m_dsp_update_05082018)</dt><dd><ul>
<li><p>multiplicity results(front panel A) can be output regardless of MultiplicityMaskHigh[31]=0 or 1</p></li>
<li><p>The value is set to 0 when the calculated energy is negative.</p></li>
<li><p>The pileup event energy is not set to 0, output calculated values directly.</p></li>
<li><p>In the record waveform mode, when the waveform buffer is full, the module is not busy, and the header continues to record. In this case, the output event data has no waveform.</p></li>
<li><p>The record waveform mode with down frequency output. The strategy adopted is to select the output of 1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, 1/128 frequency, ie how many points retain one point. The points retained are the averaged values.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>250MHz 12bit(pixie16_revf_12b250m_firmware_release)</dt><dd><ul>
<li><p>standard firmware</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>250MHz 14bit(pixie16_revfpku_14b250m_release_11032020) some bug</dt><dd><ul>
<li><p>multiplicity results can be output regardless of MultiplicityMaskHigh[31]=0 or 1. Output from front panel A and RJ45.</p></li>
<li><p>send the external timestamp clock and clear as well as the run inhibit to the backplane using the MZTIO card. TrigConfig3[1/2] control front panel/backplane</p></li>
<li><p>The value is set to 0 when the calculated energy is negative.</p></li>
<li><p>The pileup event energy is not set to 0, output calculated values directly.</p></li>
<li><p>4-ch debug signals of the front panel A to the chassis backplane’s TriggerAll bits 28 to 31. TrigConfig3[0] control</p></li>
<li><p>In the record waveform mode, when the waveform buffer is full, the module is not busy, and the header continues to record. In this case, the output event data has no waveform.</p></li>
<li><p>tried to speed up the event processing, by removing some of the unnecessary wait when reading trace from each channel.</p></li>
<li><dl class="simple">
<dt>Also removed a few unnecessary processing routines in the DSP code:</dt><dd><ul>
<li><ol class="arabic simple">
<li><p>no longer process pile-up rejection or inverse pile-up rejection, all events will be accepted, but still with pileup flag in the event header;</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>removed “no traces for large pulses” feature.</p></li>
</ol>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>250MHz 16bit(pixie16_revfpku_16b250m_release_11022020) some bug</dt><dd><ul>
<li><p>multiplicity results can be output regardless of MultiplicityMaskHigh[31]=0 or 1. Output from front panel A and RJ45.</p></li>
<li><p>send the external timestamp clock and clear as well as the run inhibit to the backplane using the MZTIO card. TrigConfig3[1/2] control front panel/backplane</p></li>
<li><p>The value is set to 0 when the calculated energy is negative.</p></li>
<li><p>The pileup event energy is not set to 0, output calculated values directly.</p></li>
<li><p>4-ch debug signals of the front panel A to the chassis backplane’s TriggerAll bits 28 to 31. TrigConfig3[0] control</p></li>
<li><p>In the record waveform mode, when the waveform buffer is full, the module is not busy, and the header continues to record. In this case, the output event data has no waveform.</p></li>
<li><p>tried to speed up the event processing, by removing some of the unnecessary wait when reading trace from each channel.</p></li>
<li><dl class="simple">
<dt>Also removed a few unnecessary processing routines in the DSP code:</dt><dd><ul>
<li><ol class="arabic simple">
<li><p>no longer process pile-up rejection or inverse pile-up rejection, all events will be accepted, but still with pileup flag in the event header;</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>removed “no traces for large pulses” feature.</p></li>
</ol>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>500MHz 14bit(pixie16_revfpku_14b500m_firmware_release_06102020)</dt><dd><ul>
<li><p>Output 4-ch debug signals of the front panel A to the chassis backplane’s TriggerAll bits [28:31], TrigConfig3[0] control enable/disable</p></li>
<li><p>send the external timestamp clock and clear as well as the run inhibit to the backplane using the MZTIO card. TrigConfig3[1/2] control front panel/backplane</p></li>
<li><p>Multiplicity results output from RJ45 port regardless of MultiplicityMaskHigh[31]=0 or 1;</p></li>
<li><p>The value is set to 0 when the calculated energy is negative.</p></li>
<li><p>The pileup event energy is not set to 0, output calculated values directly.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>500MHz 14bit(pixie16_revf_14b500m_firmware_release)</dt><dd><ul>
<li><p>standard firmware</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Decode.html" class="btn btn-neutral float-right" title="Decode" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Crate.html" class="btn btn-neutral float-left" title="Crate" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hongyi Wu(吴鸿毅)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>